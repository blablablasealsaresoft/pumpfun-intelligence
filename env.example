KOL_SNIPE_MIN_SOL=0.02
KOL_MAX_BLOCKHASH_AGE_SLOTS=20
KOL_MIN_BUY_SOL=0.3
KOL_MAX_BUY_SOL=200

###############################################
# Bundle Detection & Sniping
###############################################
ENABLE_BUNDLE_SNIPE=false
MIN_COORDINATED_BUYERS=3
WHALE_BUY_THRESHOLD_SOL=10.0
MIN_POOL_LIQUIDITY_SOL=1.0
BUNDLE_SLOT_WINDOW=2
BUNDLE_SNIPE_MAX_SOL=0.5
BUNDLE_SNIPE_MIN_CONFIDENCE=0.7
BUNDLE_MIN_VOLUME_SOL=2.0
BUNDLE_SKIP_DEX=
SNIPE_NEW_POOL_SOL=0.2
SNIPE_PUMP_GRAD_SOL=0.3
SNIPE_COORD_BUY_SOL=0.1
SNIPE_WHALE_SOL=0.15
###############################################
# Core RPC + Wallet
###############################################
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
FALLBACK_RPCS=
FALLBACK_RPC_1=
FALLBACK_RPC_2=
FALLBACK_RPC_3=
SOLANA_WS_URL=
REQUEST_TIMEOUT_SECONDS=8

# Wallet (choose ONE)
WALLET_KEYPAIR_PATH=/absolute/path/to/keypair.json
WALLET_PRIVATE_KEY=

###############################################
# Feature Flags
###############################################
ALLOW_AUTOTRADE=true
AUTO_TRADE_ENABLED=true
ALLOW_BROADCAST=true
DRY_RUN=false
KILL_SWITCH=false
SPEED_MODE=false
ENABLE_JITO_BUNDLES=false
ENABLE_RAYDIUM_DIRECT=true
RAYDIUM_DRY_RUN=true
REQUIRE_DIRECT_DEX=false
DIRECT_ROUTE_ONLY=false
ENABLE_LOGS_WATCH=false
ENABLE_GEYSER_WATCH=false
ENABLE_NEW_POOL_WATCH=false

###############################################
# Raydium Direct Path
###############################################
RAYDIUM_AMM_PROGRAM=675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8
OPENBOOK_PROGRAM_ID=srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX
RAYDIUM_POOL_CACHE_TTL_MS=5000
RAYDIUM_POOL_CACHE_TTL_COLD_MS=30000
DIRECT_DEX_TIMEOUT_MS=500
PRIORITY_FEE_MICROLAMPORTS=50000
COMPUTE_UNIT_LIMIT=200000
JITO_MIN_TIP_LAMPORTS=100000
JITO_MAX_TIP_LAMPORTS=500000
JITO_DYNAMIC_TIP=true
DEFAULT_SLIPPAGE_BPS=100

###############################################
# Jupiter / Fallback
###############################################
# Enable Jupiter as fallback when Raydium direct fails
FALLBACK_TO_JUPITER=true
JUPITER_API_URL=https://quote-api.jup.ag/v6
DEX_PREFERENCE=raydium,orca

###############################################
# Trading Sizing / Risk
###############################################
DEFAULT_BUY_AMOUNT_SOL=0.1
MIN_LIQUIDITY_USD=5000
AUTO_SNIPE_MIN_SCORE=80
MIN_POOL_AGE_MINUTES=2
MAX_PRICE_IMPACT_PCT=20
MAX_5M_DROP_PCT=15
HELIUS_MAX_TX_AGE_MINUTES=15
MAX_PER_TOKEN_SOL=2.0
MAX_GLOBAL_SOL=5.0
BALANCE_SIZING_PCT=0
MAX_PER_TRADE_SOL=3.0
MAX_LIQ_PCT_PER_TRADE=2.5
MIN_HOLDERS=0
MIN_FDV_USD=0
MAX_FDV_USD=0
MAX_TRADE_USD=0
LOW_FDV_SLIPPAGE_BPS=400
LOW_FDV_THRESHOLD_USD=500000
HIGH_FDV_SLIPPAGE_BPS=500
HIGH_FDV_THRESHOLD_USD=5000000
MAX_BUY_TAX_PCT=15
MAX_SELL_TAX_PCT=15
MAX_SWAP_RETRIES=2
SLIPPAGE_BPS_BASE=500
SLIPPAGE_BPS_STEP=200
PRIORITY_FEE_STEP_MICROLAMPORTS=50000
MAX_SLIPPAGE_BPS_CAP=2000
PANIC_SLIPPAGE_BPS=1500
PANIC_PRIORITY_FEE_MICROLAMPORTS=800000
PANIC_TIP_LAMPORTS=300000
MAX_PANIC_SLIPPAGE_BPS_CAP=3000
# Max acceptable price impact in basis points (500 = 5%). Legacy MAX_PRICE_IMPACT_PCT still works; prefer BPS.
MAX_PRICE_IMPACT_BPS=500
# MAX_PRICE_IMPACT_PCT=5
MAX_TRADE_SIZE_LAMPORTS=1000000000
MAX_CONSECUTIVE_FAILURES=3
MIN_SOL_BALANCE_LAMPORTS=50000000

###############################################
# Speed Mode Overrides (when SPEED_MODE=true)
###############################################
SPEED_SLIPPAGE_BPS_BASE=500
SPEED_SLIPPAGE_BPS_STEP=200
SPEED_PRIORITY_FEE_MICROLAMPORTS=500000
SPEED_PRIORITY_FEE_STEP_MICROLAMPORTS=100000
SPEED_MAX_SWAP_RETRIES=2
SPEED_ENABLE_JITO_BUNDLES=true
SPEED_JITO_TIP_LAMPORTS=300000

###############################################
# DCA
###############################################
DCA_ENABLED=false
DCA_TRANCHES=3
DCA_INTERVAL_SEC=10

###############################################
# Sentiment / Risk Sources
###############################################
SENTIMENT_ENABLED=false
SENTIMENT_API_URL=https://cryptopanic.com/api/v1/posts/
SENTIMENT_API_TOKEN=
SENTIMENT_KEYWORDS=solana,pump fun,pumpfun
MIN_SENTIMENT_SCORE=0.0
PUMPFUN_API_URL=https://frontend-api.pump.fun
BIRDEYE_API_KEY=

###############################################
# Monitoring / Watchers
###############################################
SCAN_INTERVAL_SECONDS=60
MIN_CLUSTER_SCORE=70
TELEGRAM_CHAT_ID=
NEW_POOL_INTERVAL_SECONDS=30
NEW_POOL_MAX_AGE_MINUTES=5
NEW_POOL_MIN_LIQ_USD=5000
RUG_PRICE_DROP_PCT=35
RUG_LIQ_THRESHOLD_USD=2000
RAYDIUM_PROGRAM_ID=RVKd61ztZW9dqrjK5vCZH1vZ1tc665Ar72Xd1LgjAoG
ORCA_PROGRAM_ID=9WwN7dBDEuDfSUdifYEYdzSsfXCMVvjJhtCmvYzuq76A
PUMPFUN_PROGRAM_ID=pump111111111111111111111111111111111111111
RAYDIUM_CREATE_IX_HASHES=
ORCA_CREATE_IX_HASHES=
GEYSER_WS_URL=
GEYSER_TOKEN=

###############################################
# Dynamic Sizing
###############################################
# Master toggle for dynamic sizing (false = use fixed DEFAULT_BUY_AMOUNT_SOL)
ENABLE_DYNAMIC_SIZING=false
# Target price impact for buys (basis points, 100 = 1%)
TARGET_IMPACT_BPS=100
# Minimum buy amount (SOL)
MIN_BUY_SOL=0.01
# Enable pre-sell simulation before buying
ENABLE_SELL_SIMULATION=true
# Max acceptable round-trip impact (buy + sell) before size reduction (bps)
MAX_ROUND_TRIP_BPS=1000
# Hard limit: skip buy if round-trip exceeds this (0 = no hard skip)
ROUND_TRIP_HARD_LIMIT_BPS=2000

###############################################
# Logging / Files
###############################################
LOG_LEVEL=INFO
PAUSE_FILE=pause.flag
FLATTEN_FILE=flatten.flag
POSITIONS_LOG=logs/positions.jsonl
PNL_LOG=logs/pnl.jsonl

###############################################
# Telegram Alerts
###############################################
TELEGRAM_BOT_TOKEN=
TELEGRAM_ALERT_CHAT_ID=

###############################################
# Jito / Bundles
###############################################
JITO_BLOCK_ENGINE_URL=https://mainnet.block-engine.jito.wtf/api/v1/bundles
JITO_TIP_LAMPORTS=100000

###############################################
# Exit Management
###############################################
TAKE_PROFIT_PERCENT=75
STOP_LOSS_PERCENT=15
TRAILING_STOP_PERCENT=10
TRAILING_STOP_ACTIVATION=20
EXIT_TIMEOUT_MINUTES=60
PRICE_POLL_SECONDS=15

###############################################
# Priority Fee Auto-Tuner (Item #3)
###############################################
ENABLE_FEE_TUNER=true
PRIORITY_FEE_MICROLAMPORTS=50000
MIN_PRIORITY_FEE_MICROLAMPORTS=10000
MAX_PRIORITY_FEE_MICROLAMPORTS=1000000
FEE_SUCCESS_DECREASE_PCT=10
FEE_FAILURE_INCREASE_PCT=50
FEE_TIMEOUT_INCREASE_PCT=25
FEE_HIGH_CONGESTION_MULTIPLIER=2.0
FEE_CRITICAL_CONGESTION_MULTIPLIER=4.0
FEE_ADJUSTMENT_COOLDOWN_SEC=30
FEE_RESET_AFTER_SEC=300

###############################################
# Auto-Pause System (Item #3)
###############################################
ENABLE_AUTO_PAUSE=true
MAX_CONSECUTIVE_FAILURES=3
MAX_FAILURES_PER_HOUR=10
MIN_SOL_BALANCE_LAMPORTS=50000000
CRITICAL_SOL_BALANCE_LAMPORTS=10000000
FAILURE_PAUSE_DURATION_SEC=300
AUTO_RESUME_AFTER_SEC=1800
BALANCE_CHECK_INTERVAL_SEC=60
REQUIRE_MANUAL_RESUME_ON_CRITICAL=true

###############################################
# Token Safety Checks (Item #4)
###############################################
# Master toggle for ownership/authority checks
ENABLE_TOKEN_SAFETY_CHECKS=true
# Require mint authority to be renounced (can't mint more tokens)
REQUIRE_MINT_RENOUNCED=true
# Require freeze authority to be renounced (can't freeze accounts)
REQUIRE_FREEZE_RENOUNCED=true
# Require metadata to be immutable (stricter, optional)
REQUIRE_METADATA_IMMUTABLE=false
# Allow Token-2022 program tokens (has extra features like transfer fees)
ALLOW_TOKEN_2022=false
# Comma-separated list of whitelisted mints (skip checks for these)
# Example: TOKEN_WHITELIST=So11111111111111111111111111111111111111112,EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
TOKEN_WHITELIST=

###############################################
# Observability / Metrics (Item #5)
###############################################
ENABLE_METRICS=true
METRICS_LOG=logs/trade_metrics.jsonl
ENABLE_METRICS_FILE=true
SLOW_TRADE_THRESHOLD_MS=2000

# Telegram Trading Alerts (uses existing TELEGRAM_BOT_TOKEN)
TELEGRAM_ALERT_CHAT_ID=
TELEGRAM_ALERT_ON_SUCCESS=false
TELEGRAM_ALERT_ON_FAILURE=true
TELEGRAM_ALERT_ON_PAUSE=true
TELEGRAM_ALERT_ON_SLOW_TRADE=true
TELEGRAM_ALERT_ON_SAFETY_BLOCK=true

###############################################
# Geyser / Snipe System (Item #6)
###############################################
# Enable Geyser websocket monitoring
ENABLE_GEYSER_WATCH=false
# Geyser WebSocket URL (Helius, Triton, etc.)
GEYSER_WS_URL=
GEYSER_TOKEN=
# Provider: generic | helius | triton
GEYSER_PROVIDER=generic
# Helius API key (if provider=helius)
GEYSER_API_KEY=
# Transaction details mode: full | none
GEYSER_TX_DETAILS=full
# Geyser mode: default | jito (blockSubscribe)
GEYSER_MODE=default
# Instruction hashes for pool creation detection
PUMP_MIGRATE_IX_HASH=
RAYDIUM_INIT_IX_HASH=
ORCA_INIT_IX_HASH=
# Snipe execution settings
ENABLE_SNIPE=false
MAX_SNIPE_SOL=0.5
MIN_SNIPE_LIQUIDITY_SOL=1.0
SNIPE_SLIPPAGE_BPS=1000
SNIPE_PREFLIGHT_OFF=true
# Jito for snipes
SNIPE_USE_JITO=true
SNIPE_JITO_TIP_LAMPORTS=100000

###############################################
# Cluster Scoring / Filters
###############################################
# Comma-separated LP mint whitelist (skip LP block)
LP_WHITELIST=
# Minimum SOL-side liquidity required (enforced only if available from data)
MIN_SOL_LIQ=0
# Base token decimals bounds (inclusive)
MIN_BASE_DECIMALS=6
MAX_BASE_DECIMALS=9
# Boost when smart-money overlap exceeds threshold (0.0-1.0)
SMART_MONEY_OVERLAP_THRESHOLD=0.2
SMART_MONEY_OVERLAP_BOOST=500   # added to cluster_score (0-10000)
# Penalize clusters with safety warnings (mint/freeze/metadata mutable)
SAFETY_PENALTY_ENABLED=true
SAFETY_PENALTY_POINTS=300
# Optional ML blend (provide weight 0.0-1.0; requires coeffs offline)
ML_BLEND_WEIGHT=0.0
# Logistic regression coefficients (comma-separated) and intercept for ML blend
# Feature order (if provided): liq_usd, liq_delta_5m_usd, liq_delta_30m_usd, holder_growth_24h, unique_wallets_24h, pool_age_minutes, smart_overlap
ML_COEFFS=
ML_INTERCEPT=0
# Smart-money cadence boost
CADENCE_WINDOW_MIN=15
CADENCE_MIN_REPEATS=2
CADENCE_BOOST_POINTS=300
# Auto-snipe on new pool clusters (synthetic)
AUTO_SNIPE_ON_POOL=true
# KOL bundle sniping
KOL_WALLETS=
KOL_WALLETS_FILE=backend/src/kol_wallets.txt
KOL_SNIPE_SLIPPAGE_BPS=1200
KOL_SNIPE_PRIORITY_MULT=3.0
KOL_SNIPE_MAX_SOL=0.25

###############################################
# Price Feeds
###############################################
PYTH_PRICE_FEED_ENABLED=false
PYTH_API_URL=https://hermes.pyth.network/api
PYTH_SOL_USD_FEED_ID=ef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d

###############################################
# Position Manager / Auto-Exit
###############################################
ENABLE_POSITION_MANAGER=true
# Take profit full exit (% gain from entry)
TAKE_PROFIT_PCT=75
# Partial TP (% of position to sell) and trigger level
ENABLE_PARTIAL_TP=true
TAKE_PROFIT_PARTIAL_PCT=50
TAKE_PROFIT_PARTIAL_AT_PCT=50
# Stop loss (% drop from entry)
STOP_LOSS_PCT=15
# Trailing stop (activate after X% run, trail by Y%)
ENABLE_TRAILING_STOP=true
TRAILING_STOP_ACTIVATION_PCT=20
TRAILING_STOP_PCT=10
# Time-based exit (minutes)
ENABLE_TIME_EXIT=true
MAX_HOLD_MINUTES=60
# Rug protection (price drop/liquidity floor)
ENABLE_RUG_PROTECTION=true
RUG_DROP_PCT=35
RUG_LIQ_THRESHOLD_USD=2000
# Sell execution settings
SELL_SLIPPAGE_BPS=1000
SELL_PRIORITY_FEE_MULTIPLIER=2.0
USE_JITO_FOR_EXITS=true
EXIT_JITO_TIP_LAMPORTS=150000
# Price polling for exits (seconds)
PRICE_POLL_SECONDS=5
# Position persistence file
POSITIONS_FILE=data/positions.json

###############################################
# External Risk Sources (best-effort)
###############################################
TOKEN_SNIFFER_ENABLED=true
TOKEN_SNIFFER_TIMEOUT=8
RUGCHECK_ENABLED=true
RUGCHECK_TIMEOUT=8
GOPLUS_ENABLED=true
GOPLUS_TIMEOUT=8
RUGDOC_ENABLED=false
RUGDOC_TIMEOUT=8
